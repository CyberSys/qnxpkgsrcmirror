$NetBSD$

--- ffserver.c.orig	2010-05-15 10:51:32.000000000 +0000
+++ ffserver.c
@@ -4556,7 +4556,10 @@ int main(int argc, char **argv)
 
     memset(&sigact, 0, sizeof(sigact));
     sigact.sa_handler = handle_child_exit;
-    sigact.sa_flags = SA_NOCLDSTOP | SA_RESTART;
+    sigact.sa_flags = SA_NOCLDSTOP;
+#ifdef SA_RESTART
+    sigact.sa_flags |= SA_RESTART;
+#endif
     sigaction(SIGCHLD, &sigact, 0);
 
     if (parse_ffconfig(config_filename) < 0) {
