$NetBSD$

--- signal.c.orig	2009-07-02 02:05:28.000000000 -0400
+++ signal.c
@@ -180,7 +180,9 @@ _evsignal_set_handler(struct event_base 
 #ifdef HAVE_SIGACTION
 	memset(&sa, 0, sizeof(sa));
 	sa.sa_handler = handler;
+#ifdef SA_RESTART
 	sa.sa_flags |= SA_RESTART;
+#endif
 	sigfillset(&sa.sa_mask);
 
 	if (sigaction(evsignal, &sa, sig->sh_old[evsignal]) == -1) {
