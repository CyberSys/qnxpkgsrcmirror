$NetBSD: patch-al,v 1.1 2010/04/04 08:12:03 obache Exp $

Fix _XOPEN_SOURCE problem on DragonFly
http://repo.or.cz/w/git.git/commit/6555b196f00128f13ab8f719ee1e156238f16bb3

--- git-compat-util.h.orig	2010-02-10 23:12:51.000000000 +0000
+++ git-compat-util.h
@@ -55,7 +55,8 @@
 # else
 # define _XOPEN_SOURCE 500
 # endif
-#elif !defined(__APPLE__) && !defined(__FreeBSD__)  && !defined(__USLC__) && !defined(_M_UNIX) && !defined(sgi)
+#elif !defined(__APPLE__) && !defined(__FreeBSD__)  && !defined(__USLC__) && \
+      !defined(_M_UNIX) && !defined(sgi) && !defined(__DragonFly__) && !defined(__QNXNTO__)
 #define _XOPEN_SOURCE 600 /* glibc2 and AIX 5.3L need 500, OpenBSD needs 600 for S_ISLNK() */
 #define _XOPEN_SOURCE_EXTENDED 1 /* AIX 5.3L needs this */
 #endif
@@ -115,6 +116,9 @@
 #undef _ALL_SOURCE /* AIX 5.3L defines a struct list with _ALL_SOURCE. */
 #include <grp.h>
 #define _ALL_SOURCE 1
+#if defined(__QNXNTO__)
+#include "compat/qnxnto.h"
+#endif
 #endif
 #else 	/* __MINGW32__ */
 /* pull in Windows compatibility stuff */
